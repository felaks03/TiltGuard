<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TiltGuard - Gu√≠a de Configuraci√≥n Avanzada</title>
    <link rel="stylesheet" href="../styles/setup-guide.css">
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üîí Protecci√≥n Avanzada TiltGuard</h1>
            <p>Haz tu extensi√≥n inremovible (opcional pero recomendado)</p>
        </div>

        <div class="controls">
            <div class="os-detector">
                <p>Selecciona tu sistema operativo:</p>
                <select id="os-selector" class="os-select">
                    <option value="windows">ü™ü Windows</option>
                    <option value="mac">üçé macOS</option>
                    <option value="linux">üêß Linux</option>
                </select>
            </div>

            <div class="mode-selector">
                <button class="mode-btn active" data-mode="install">üì• Instalaci√≥n</button>
                <button class="mode-btn" data-mode="uninstall">üóëÔ∏è Desinstalaci√≥n</button>
            </div>
        </div>

        <!-- WINDOWS INSTALL -->
        <div class="guide-section" id="guide-windows-install" style="display: none;">
            <h2>ü™ü Windows - Instalaci√≥n</h2>
            <div class="warning-box">
                <p>‚ö†Ô∏è <strong>Importante:</strong> Necesitar√°s acceso de administrador. Se te pedir√° permiso en el paso
                    2.</p>
            </div>

            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Copia el ID de la extensi√≥n</h3>
                        <p>Abre Chrome y accede a <code>chrome://extensions</code></p>
                        <p>Localiza "TiltGuard" y copia su ID (el c√≥digo largo debajo del nombre)</p>
                        <p style="margin-top: 12px; font-size: 12px; color: #666;">Tu ID es:</p>
                        <div class="code-block"
                            style="background: #fff3cd; color: #856404; border-left-color: #ffc107;">
                            <span class="extension-id-example">cargando...</span>
                        </div>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Abre el Editor de Registro (Regedit)</h3>
                        <ol style="margin: 8px 0; padding-left: 20px;">
                            <li>Presiona <kbd>Win + R</kbd></li>
                            <li>Escribe: <code>regedit</code></li>
                            <li>Presiona Enter</li>
                        </ol>
                        <p style="margin-top: 12px;"><strong>Aparecer√° un cuadro pidiendo permiso - Haz clic en
                                "S√≠"</strong></p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>Navega a la carpeta de Chrome</h3>
                        <p style="margin-bottom: 12px;">En el panel izquierdo, haz clic en las flechitas para expandir
                            estas carpetas <strong>en orden</strong>:</p>
                        <div class="code-block"
                            style="text-align: left; background: #f0f0f0; border-left-color: #667eea;">
                            <strong>HKEY_LOCAL_MACHINE</strong><br>
                            &nbsp;&nbsp;‚îî‚îÄ <strong>Software</strong><br>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ <strong>Policies</strong><br>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ <strong>Google</strong><br>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ
                            <strong>Chrome</strong> (si no existe, cr√©ala)
                        </div>
                        <p style="margin-top: 12px; font-size: 12px; color: #666;">üí° Si no existe "Chrome", haz clic
                            derecho en "Google" ‚Üí Nuevo ‚Üí Clave ‚Üí escribe "Chrome"</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h3>Crea la carpeta ExtensionInstallForcelist</h3>
                        <ol style="margin: 8px 0; padding-left: 20px;">
                            <li>Haz <strong>clic derecho</strong> en "Chrome"</li>
                            <li>Selecciona "Nuevo" ‚Üí "Clave"</li>
                            <li>Escribe: <code>ExtensionInstallForcelist</code></li>
                            <li>Presiona Enter</li>
                        </ol>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <h3>A√±ade tu extensi√≥n a la lista</h3>
                        <ol style="margin: 8px 0; padding-left: 20px;">
                            <li>Haz <strong>clic derecho</strong> en "ExtensionInstallForcelist"</li>
                            <li>Selecciona "Nuevo" ‚Üí "Valor de cadena"</li>
                            <li>Nombralo: <code>1</code></li>
                            <li>Presiona Enter</li>
                            <li>Se abrir√° una ventana de edici√≥n. En "Datos del valor" pega:
                                <div class="code-block" style="margin-top: 8px;">
                                    tu_extension_id;https://clients2.google.com/service/update2/crx
                                </div>
                            </li>
                        </ol>
                    </div>
                </div>

                <div class="step" style="background: #d4edda; border: 1px solid #c3e6cb;">
                    <div class="step-number" style="background: #28a745;">‚úì</div>
                    <div class="step-content">
                        <h3>¬°Hecho! Reinicia Chrome</h3>
                        <p><strong>Cierra Regedit y reinicia Chrome por completo.</strong></p>
                        <p style="margin-top: 8px;">Ahora, si intentas eliminar TiltGuard desde chrome://extensions:</p>
                        <ul style="margin: 8px 0 0 0; padding-left: 20px;">
                            <li>‚ùå No ver√°s el bot√≥n "Quitar"</li>
                            <li>‚ùå La extensi√≥n estar√° gris (desactivada desde el gestor)</li>
                            <li>‚úÖ Solo t√∫ (con acceso de admin) puedes desactivarla eliminando el archivo de registro
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- MAC INSTALL -->
        <div class="guide-section" id="guide-mac-install" style="display: none;">
            <h2>macOS</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Obt√©n el ID de la extensi√≥n</h3>
                        <p>Abre Chrome y ve a <code>chrome://extensions</code></p>
                        <p>Busca "TiltGuard" y copia el ID</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Abre Terminal</h3>
                        <p>Cmd + Espacio ‚Üí Escribe "Terminal" ‚Üí Enter</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>Crea la carpeta de pol√≠ticas</h3>
                        <p>Copia este comando:</p>
                        <div class="code-block">
                            sudo nano "/Library/Google/Chrome/policies/managed/force_extension.json"
                        </div>
                        <p style="margin-top: 12px;">Presiona Enter y escribe tu contrase√±a</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h3>Crea el archivo de configuraci√≥n</h3>
                        <p>Copia este comando:</p>
                        <div class="code-block">
                            sudo nano "/Library/Google/Chrome/policies/managed/force_extension.json"
                        </div>
                        <p style="margin-top: 12px;">Se abrir√° un editor de texto</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <h3>A√±ade la configuraci√≥n</h3>
                        <p>Pega este contenido (REEMPLAZA EL ID):</p>
                        <div class="code-block">
                            {
                            "ExtensionInstallForcelist": [
                            "tu_extension_id;https://clients2.google.com/service/update2/crx"
                            ]
                            }
                        </div>
                        <p style="margin-top: 12px; font-size: 12px; color: #666;">Tu ID es: <code
                                style="background: #fff3cd; padding: 4px 8px; color: #856404;"><span class="extension-id-example">cargando...</span></code>
                            </puarda y cierra</h3>
                        <p>Presiona <kbd>Ctrl + O</kbd> ‚Üí Enter (para guardar)</p>
                        <p>Presiona <kbd>Ctrl + X</kbd> (para cerrar)</p>
                    </div>
                </div>

                <div class="step" style="background: #d4edda; border: 1px solid #c3e6cb;">
                    <div class="step-number" style="background: #28a745;">‚úì</div>
                    <div class="step-content">
                        <h3>Reinicia Chrome</h3>
                        <p><strong>La extensi√≥n ahora es inremovible.</strong></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- LINUX INSTALL -->
        <div class="guide-section" id="guide-linux-install" style="display: none;">
            <h2>Linux</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Obt√©n el ID de la extensi√≥n</h3>
                        <p>Abre Chrome y ve a <code>chrome://extensions</code></p>
                        <p>Busca "TiltGuard" y copia el ID</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Abre Terminal</h3>
                        <p>Ctrl + Alt + T</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>Crea la carpeta de pol√≠ticas (si no existe)</h3>
                        <p>Copia y ejecuta:</p>
                        <div class="code-block">
                            sudo mkdir -p /etc/opt/chrome/policies/managed
                        </div>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h3>Crea el archivo de configuraci√≥n</h3>
                        <p>Copia y ejecuta:</p>
                        <div class="code-block">
                            sudo nano /etc/opt/chrome/policies/managed/force_extension.json
                        </div>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <h3>A√±ade la configuraci√≥n</h3>
                        <p>Pega este contenido (reemplaza tu_extension_id):</p>
                        <div class="code-block">
                            {
                            "ExtensionInstallForcelist": [
                            "tu_extension_id;https://clients2.google.com/service/update2/crx"
                            ]
                            }
                        </div>
                        <p style="margin-top: 12px; font-size: 12px; color: #666;">Tu ID es: <code
                                style="background: #fff3cd; padding: 4px 8px; color: #856404;"><span class="extension-id-example">cargando...</span></code>
                        </p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">6</div>
                    <div class="step-content">
                        <h3>Guarda y cierra</h3>
                        <p>Presiona <kbd>Ctrl + O</kbd> ‚Üí Enter (para guardar)</p>
                        <p>Presiona <kbd>Ctrl + X</kbd> (para cerrar)</p>
                    </div>
                </div>

                <div class="step" style="background: #d4edda; border: 1px solid #c3e6cb;">
                    <div class="step-number" style="background: #28a745;">‚úì</div>
                    <div class="step-content">
                        <h3>Reinicia Chrome</h3>
                        <p><strong>La extensi√≥n ahora es inremovible.</strong></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- WINDOWS UNINSTALL -->
        <div class="guide-section" id="guide-windows-uninstall" style="display: none;">
            <h2>Windows - Desinstalaci√≥n</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Abre el Editor de Registro</h3>
                        <p>Presiona <kbd>Win + R</kbd></p>
                        <p>Escribe: <code>regedit</code></p>
                        <p>Presiona Enter</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Navega a la carpeta</h3>
                        <div class="code-block" style="text-align: left;">
                            HKEY_LOCAL_MACHINE<br>
                            &nbsp;&nbsp;‚îî‚îÄ‚îÄ Software<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ Policies<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ Google<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ
                            Chrome
                        </div>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>Elimina la clave</h3>
                        <p>Busca <code>ExtensionInstallForcelist</code></p>
                        <p>Haz clic derecho ‚Üí Eliminar</p>
                        <p>Confirma la eliminaci√≥n</p>
                    </div>
                </div>

                <div class="step" style="background: #d4edda; border: 1px solid #c3e6cb;">
                    <div class="step-number" style="background: #28a745;">‚úì</div>
                    <div class="step-content">
                        <h3>Cierra Regedit y reinicia Chrome</h3>
                        <p><strong>La extensi√≥n ahora se puede desinstalar normalmente</strong></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- MAC UNINSTALL -->
        <div class="guide-section" id="guide-mac-uninstall" style="display: none;">
            <h2>macOS - Desinstalaci√≥n</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Abre Terminal</h3>
                        <p>Cmd + Espacio ‚Üí Escribe "Terminal" ‚Üí Enter</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Elimina el archivo de configuraci√≥n</h3>
                        <p>Copia y ejecuta:</p>
                        <div class="code-block">
                            sudo rm "/Library/Google/Chrome/policies/managed/force_extension.json"
                        </div>
                        <p style="margin-top: 12px;">Escribe tu contrase√±a cuando se pida</p>
                    </div>
                </div>

                <div class="step" style="background: #d4edda; border: 1px solid #c3e6cb;">
                    <div class="step-number" style="background: #28a745;">‚úì</div>
                    <div class="step-content">
                        <h3>Reinicia Chrome</h3>
                        <p><strong>La extensi√≥n ahora se puede desinstalar normalmente</strong></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- LINUX UNINSTALL -->
        <div class="guide-section" id="guide-linux-uninstall" style="display: none;">
            <h2>Linux - Desinstalaci√≥n</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Abre Terminal</h3>
                        <p>Ctrl + Alt + T</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Elimina el archivo de configuraci√≥n</h3>
                        <p>Copia y ejecuta:</p>
                        <div class="code-block">
                            sudo rm /etc/opt/chrome/policies/managed/force_extension.json
                        </div>
                    </div>
                </div>

                <div class="step" style="background: #d4edda; border: 1px solid #c3e6cb;">
                    <div class="step-number" style="background: #28a745;">‚úì</div>
                    <div class="step-content">
                        <h3>Reinicia Chrome</h3>
                        <p><strong>La extensi√≥n ahora se puede desinstalar normalmente</strong></p>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <button class="done-btn" id="doneBtn">
                <span class="done-icon">‚úì</span>
                Ya lo he instalado
            </button>
        </div>

        <div id="requestScreen" class="request-screen" style="display: none;">
            <div class="request-message">
                <h2>üìã Solicitar Acceso a Instalaciones</h2>
                <p>Ya has completado la configuraci√≥n anteriormente. Si necesitas volver a revisar las gu√≠as de
                    instalaci√≥n, solic√≠talo aqu√≠.</p>
                <button class="request-btn" id="requestAccessBtn">
                    üìã Solicitar acceso (Timer: 1 min)
                </button>
                <p class="request-hint">Despu√©s de solicitar, deber√°s esperar 1 minuto antes de poder acceder de nuevo.
                </p>
            </div>
        </div>

        <div id="cooldownOverlay" class="cooldown-overlay" style="display: none;">
            <div class="cooldown-message">
                <h2>‚è±Ô∏è Gu√≠a en espera</h2>
                <p>Debes esperar antes de volver a acceder a la gu√≠a de instalaci√≥n.</p>
                <div class="cooldown-timer" id="cooldownTimer">
                    Tiempo restante: <strong id="cooldownTime">2:00:00</strong>
                </div>
                <button class="close-btn" id="closeBtn">
                    ‚úï Cerrar
                </button>
                <p class="cooldown-hint">Podr√°s acceder a la gu√≠a cuando expire el tiempo.</p>
            </div>
        </div>
    </div>

    <script src="../scripts/setup-guide.js"></script>
</body>

</html>