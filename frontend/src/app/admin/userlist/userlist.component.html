<div class="content" (click)="cerrarMenu()">
    <h1>Usuarios</h1>

    @if (error()) {
    <div class="error">
        <p>{{ error() }}</p>
    </div>
    }

    @if (!error() && usuarios().length > 0) {
    <div class="usuarios-lista">
        @for (usuario of usuarios(); track usuario._id) {
        <div class="usuario-item">
            <div class="usuario-info">
                <div class="usuario-nombre">{{ usuario.nombre }}</div>
                <div class="usuario-email">{{ usuario.email }}</div>
                <span class="usuario-rol" [class.admin]="usuario.rol === 'admin'"
                    [class.usuario]="usuario.rol === 'usuario'">
                    {{ usuario.rol }}
                </span>
                <span class="usuario-estado" [class.activo]="usuario.activo" [class.inactivo]="!usuario.activo">
                    {{ usuario.activo ? "Activo" : "Inactivo" }}
                </span>
            </div>
            <div class="usuario-menu-container">
                <button class="menu-btn" (click)="toggleMenu(usuario._id, $event)" title="Opciones">
                    <span class="menu-dots">â‹®</span>
                </button>
                @if (menuAbiertoId() === usuario._id) {
                <div class="menu-dropdown" (click)="$event.stopPropagation()">
                    <button class="menu-item" (click)="editar(usuario)">
                        <span class="icon">âœï¸</span> Editar
                    </button>
                    <button class="menu-item" (click)="cambiarEstado(usuario)">
                        <span class="icon">ğŸ”„</span> Cambiar estado
                    </button>
                    <button class="menu-item delete" (click)="eliminar(usuario)">
                        <span class="icon">ğŸ—‘ï¸</span> Eliminar
                    </button>
                </div>
                }
            </div>
        </div>
        }
    </div>
    }

    @if (!error() && usuarios().length === 0) {
    <div class="no-usuarios">
        <p>No hay usuarios registrados</p>
    </div>
    }
</div>